{
  "hash": "df5d361ea7afbd23b253920bed4f928e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Take-home_exercise_2\"\nauthor: \"Xie Haoyang\"\ndate: \"February 1, 2025\"\ndate-modified: \"last-modified\"\nexecute:\n  echo: true\n  eval: true\n  warning: false\n  freeze: true\n---\n\n\n\n# Trend analysis of Singapore's international trade since 2015\n\n## 1 Introduction\n\n### 1.1 Background\n\nIn today's globalized era, international trade is a key economic topic. Singapore, with its strong financial sector and vibrant port economy, is highly sensitive to global economic changes. As an international financial center and major transshipment hub, its prosperity is closely tied to international trade dynamics.\n\nGlobalization brings both opportunities and challenges to Singapore's trade. Fluctuations in global demand, trade policies, and technological changes impact its trade volume, composition, and direction. Understanding these trends is crucial for policymakers to develop strategies and for local businesses to make decisions.\n\n### 1.2 Objective\n\nThis study focuses on exploring and visualizing Singapore's international trade data using R. By analyzing historical and current data, we aim to identify patterns, discover trends, analyze the future direction of trade, and suggest improvements to the data visualizations that are now available on the Singapore government website.\n\n## 2 Data prepare\n\n### 2.1 Install and launch R packages\n\n123\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(readxl, tidyverse, lubridate)\n```\n:::\n\n\n\n### 2.2 Data source\n\nThe data is from *Merchandise Trade.* *Department of Statistics Singapore, DOS,* which contains two datasets:\n\n1\\. Merchandise Trade by Region/Market\n\n2\\. Merchandise Trade by Commodity Section/Division\n\nDataset 1 contains 3 tables:\n\n| Table Number | Name |\n|----|----|\n| Sheet 1 | Merchandise Trade By Region And Selected Market (Imports) |\n| Sheet 2 | Merchandise Trade By Region And Selected Market (Domestic Exports) |\n| Sheet 3 | Merchandise Trade By Region And Selected Market (Re-Exports) |\n\nDataset 2 contains 10 tables:\n\n| Table Number | Name                                           |\n|--------------|------------------------------------------------|\n| Sheet 1      | Commodity(At Current Prices)                   |\n| Sheet 2      | Commodity(At 2023 Prices)                      |\n| Sheet 3      | Merchandise Imports By Commodity Division      |\n| Sheet 4      | Merchandise Imports Of Machinery And Equipment |\n| Sheet 5      | Merchandise Exports By Commodity Division      |\n| Sheet 6      | Merchandise Exports Of Machinery And Equipment |\n| Sheet 7      | Domestic Exports By Commodity Division         |\n| Sheet 8      | Domestic Exports Of Major Non-Oil Products     |\n| Sheet 9      | Re-Exports By Commodity Division               |\n| Sheet 10     | Re-Exports Of Machinery And Equipment          |\n\n### 2.2.1 Importing Data\n\nBefore importing the data, since there are some descriptive statements in the original table, copy the original table, keep one copy of these descriptions and delete the other to prevent its interference with the R recognition data, and import the table after deleting them.\n\n![](images/536e45907ab8c8aaa27438a1a6662cf2.png)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nImports_data <- read_xlsx(\"data/outputFile.xlsx\", sheet = \"T1\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nExports_data <- read_xlsx(\"data/outputFile.xlsx\", sheet = \"T2\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nRe_Exports_data <- read_xlsx(\"data/outputFile.xlsx\", sheet = \"T3\")\n```\n:::\n\n\n\n### 2.2.2 Checking for duplicates\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nImports_data[duplicated(Imports_data), ]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 0 × 266\n# ℹ 266 variables: Data Series <chr>, 2025 Jan <dbl>, 2024 Dec <dbl>,\n#   2024 Nov <dbl>, 2024 Oct <dbl>, 2024 Sep <dbl>, 2024 Aug <dbl>,\n#   2024 Jul <dbl>, 2024 Jun <dbl>, 2024 May <dbl>, 2024 Apr <dbl>,\n#   2024 Mar <dbl>, 2024 Feb <dbl>, 2024 Jan <dbl>, 2023 Dec <dbl>,\n#   2023 Nov <dbl>, 2023 Oct <dbl>, 2023 Sep <dbl>, 2023 Aug <dbl>,\n#   2023 Jul <dbl>, 2023 Jun <dbl>, 2023 May <dbl>, 2023 Apr <dbl>,\n#   2023 Mar <dbl>, 2023 Feb <dbl>, 2023 Jan <dbl>, 2022 Dec <dbl>, …\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nExports_data[duplicated(Exports_data), ]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 0 × 266\n# ℹ 266 variables: Data Series <chr>, 2025 Jan <dbl>, 2024 Dec <dbl>,\n#   2024 Nov <dbl>, 2024 Oct <dbl>, 2024 Sep <dbl>, 2024 Aug <dbl>,\n#   2024 Jul <dbl>, 2024 Jun <dbl>, 2024 May <dbl>, 2024 Apr <dbl>,\n#   2024 Mar <dbl>, 2024 Feb <dbl>, 2024 Jan <dbl>, 2023 Dec <dbl>,\n#   2023 Nov <dbl>, 2023 Oct <dbl>, 2023 Sep <dbl>, 2023 Aug <dbl>,\n#   2023 Jul <dbl>, 2023 Jun <dbl>, 2023 May <dbl>, 2023 Apr <dbl>,\n#   2023 Mar <dbl>, 2023 Feb <dbl>, 2023 Jan <dbl>, 2022 Dec <dbl>, …\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nRe_Exports_data[duplicated(Re_Exports_data), ]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 0 × 266\n# ℹ 266 variables: Data Series <chr>, 2025 Jan <dbl>, 2024 Dec <dbl>,\n#   2024 Nov <dbl>, 2024 Oct <dbl>, 2024 Sep <dbl>, 2024 Aug <dbl>,\n#   2024 Jul <dbl>, 2024 Jun <dbl>, 2024 May <dbl>, 2024 Apr <dbl>,\n#   2024 Mar <dbl>, 2024 Feb <dbl>, 2024 Jan <dbl>, 2023 Dec <dbl>,\n#   2023 Nov <dbl>, 2023 Oct <dbl>, 2023 Sep <dbl>, 2023 Aug <dbl>,\n#   2023 Jul <dbl>, 2023 Jun <dbl>, 2023 May <dbl>, 2023 Apr <dbl>,\n#   2023 Mar <dbl>, 2023 Feb <dbl>, 2023 Jan <dbl>, 2022 Dec <dbl>, …\n```\n\n\n:::\n:::\n\n\n\nThe result shows no duplicate data.\n\n### 2.2.3 Check missing values\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nany(is.na(Imports_data))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nany(is.na(Exports_data))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nany(is.na(Re_Exports_data))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE\n```\n\n\n:::\n:::\n\n\n\nThe result shows no missing values.\n\n## Evaluation of data visualizations\n\n### 3.1 Comments 1\n\n![](images/bf8041da17c6887093dbd140929d5606.png)\n\n+-----------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Advantages                                                                                                                  | Disadvantages                                                                                                                                             |\n+=============================================================================================================================+===========================================================================================================================================================+\n| The contrasting colors of the different years make it easy to identify the data as belonging to different years.            | The use of bar charts results in less obvious trends in the data, and exports and imports are mixed together, making it harder to see trends in the data. |\n|                                                                                                                             |                                                                                                                                                           |\n| Similar colors are used for imports and exports in the same year, making it easy to identify data from the same year.       |                                                                                                                                                           |\n+-----------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Total trade for each year is labeled to the right of the corresponding year, facilitating direct comparisons between years. | Direct display of total trade per year does not show trends in total trade.                                                                               |\n+-----------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+\n\nThe improved sketch is as follows\n\n::: panel-tabset\n## The plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_exercise_2_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n## The code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nconvert_to_annual <- function(data) {\n  \n  data_row <- data[1, ]\n  \n  col_names <- colnames(data)\n  \n  time_col_names <- col_names[-1]\n  \n  years <- as.numeric(sub(\" .*\", \"\", time_col_names))\n  \n  valid_years <- years >= 2015 & years <= 2024\n  valid_time_col_names <- time_col_names[valid_years]\n  valid_data <- data_row[ , -1][valid_years]\n  \n  data_df <- data.frame(Year = years[valid_years], Value = as.numeric(valid_data))\n  \n  annual_data <- aggregate(Value ~ Year, data = data_df, sum)\n  \n  return(annual_data)\n}\n\nimport_annual <- convert_to_annual(Imports_data)\nexport_annual <- convert_to_annual(Exports_data)\nre_export_annual <- convert_to_annual(Re_Exports_data)\n\ncombined_export_annual <- data.frame(\n  Year = export_annual$Year,\n  Value_Export = export_annual$Value + re_export_annual$Value\n)\n\nmerged_data <- merge(import_annual, combined_export_annual, by = \"Year\")\n\nmerged_data$Total <- merged_data$Value + merged_data$Value_Export\n\nmerged_data$Value <- merged_data$Value / 1000\nmerged_data$Value_Export <- merged_data$Value_Export / 1000\nmerged_data$Total <- merged_data$Total / 1000\n\nggplot(merged_data, aes(x = Year)) +\n  geom_line(aes(y = Value, color = \"Imports\")) +\n  geom_line(aes(y = Value_Export, color = \"Exports\")) +\n  geom_line(aes(y = Total, color = \"Total Trade\")) +\n  geom_text(aes(y = Value, label = Value), vjust = -0.5, size = 3) +\n  geom_text(aes(y = Value_Export, label = Value_Export), vjust = 1.5, size = 3) +\n  geom_text(aes(y = Total, label = Total), vjust = -0.5, size = 3) +\n  labs(title = \"Annual Imports, Exports and Total Trade Trends (2015 - 2024)\",\n       x = \"Year\",\n       y = \"Billion Dollars\",\n       color = \"Data Series\") +\n  scale_x_continuous(breaks = seq(2015, 2024, 1)) +\n  theme_minimal()\n```\n:::\n\n\n:::\n\n| Explanation |\n|----|\n| Replacing the bar chart in the original figure with a line chart would better represent the trend of trade volume over time. At the same time, the value of total trade is also converted into a line chart to reflect the trend, and the specific value for each year is indicated. |\n\n### 3.2 Comments 2\n\n### 3.3 Comments 3\n",
    "supporting": [
      "Take-home_exercise_2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}